{"version":2,"kind":"Notebook","sha256":"94f80bee31b62b714b24e95b850ed2682598223f43a4dd3e98c21788e361fd68","slug":"notebooks.wavelet-introduction.spy-keypad","location":"/notebooks/wavelet-introduction/spy-keypad.ipynb","dependencies":[],"frontmatter":{"title":"Spy Keypad","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Project Pythia Community","given":"Project Pythia","family":"Community"},"name":"Project Pythia Community","url":"https://projectpythia.org/","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/wavelet-cookbook","copyright":"2024","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/wavelet-cookbook/blob/main/notebooks/wavelet-introduction/spy-keypad.ipynb","thumbnail":"/wavelet-cookbook/build/undefined","exports":[{"format":"ipynb","filename":"spy-keypad.ipynb","url":"/wavelet-cookbook/build/spy-keypad-6fa1a45e4f280dcca5ddc147609e2883.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","children":[{"type":"image","url":"/wavelet-cookbook/build/undefined","alt":"Typing gif from Wikipedia","width":"500px","key":"SiDXe2v0Zh","urlSource":"https://upload.wikimedia.org/wikipedia/commons/6/6f/Programming123najra.gif"}],"key":"OGhEo5kUHf"}],"key":"Eho9ZXuC3u"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Spy Keypad","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LKIguuTraE"}],"identifier":"spy-keypad","label":"Spy Keypad","html_id":"spy-keypad","implicit":true,"key":"BcRZeoDMgX"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Part 2 for working with audio signals","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wlbfCt1Lag"}],"key":"ikVcwlezpm"}],"key":"ycCu773yZ1"}],"key":"I5NtXdKkZk"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iYx1cgELRo"}],"key":"krkA1FJXVG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Kmk5MFaYLn"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"CgXmxUulFS"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A door is encoded with a number pad (0-9). We can’t see the door, but through nefarious means we have a recording of someone opening it. Quick! We need to decode this ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dOO33ihLY2"},{"type":"link","url":"https://github.com/ProjectPythia/wavelet-cookbook/blob/main/notebooks/data/mystery_signal.wav","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"mystery signal","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FppcwwtJty"}],"urlSource":"https://github.com/ProjectPythia/wavelet-cookbook/blob/main/notebooks/data/mystery_signal.wav","data":{"kind":"file","org":"ProjectPythia","repo":"wavelet-cookbook","reference":"main","file":"notebooks/data/mystery_signal.wav","raw":"https://raw.githubusercontent.com/ProjectPythia/wavelet-cookbook/main/notebooks/data/mystery_signal.wav"},"internal":false,"protocol":"github","key":"D7qyHVh5Ki"},{"type":"text","value":" and the order they appear to open the door!","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"T2Iyra05xl"}],"key":"O9nvE182Z6"}],"key":"mfrW0W6Gbj"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We know that the door code is set up as:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FRnhxStsG6"}],"key":"acppPQh2dc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"A note: 0","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"J6PdiLkvRX"}],"key":"Hl6WXN0zzn"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"B note: 1","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ko7mH5K11i"}],"key":"vynre5wVi9"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"C note: 2","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"PFR14ux29g"}],"key":"UmJTdG9tSX"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"D note: 3","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"RXTeNR6gUu"}],"key":"h6fDE0a5Si"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"E note: 4","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"kqNY6nfISW"}],"key":"O7cSI1ykTj"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"F note: 5","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"NCWsWiHjyP"}],"key":"PIyYOZ1XrN"}],"key":"Err9EUiuaO"}],"key":"xBhFHyL3ld"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GnBllC1Jel"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"Wmmunstxzz"},{"type":"table","position":{"start":{"line":2,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"rhBsLa8BjM"}],"key":"zMPZ0DlZAr"},{"type":"tableCell","header":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"flJNtao0TA"}],"key":"WaOaESMLwH"},{"type":"tableCell","header":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"b7c5z5ktXz"}],"key":"guqT8PwrXP"}],"key":"evJ7vzJGZL"},{"type":"tableRow","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Intro to Matplotlib","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"O3yvmyGQqr"}],"urlSource":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics","key":"M7VA0Gzfa1"}],"key":"D3F9z0oOOS"},{"type":"tableCell","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"rBNafNmqpD"}],"key":"JknGrTphG0"},{"type":"tableCell","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Used to plot data","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"okt8l3pclw"}],"key":"Nqmzs3jjMc"}],"key":"onZz1VApMt"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/pandas/pandas","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Intro to Pandas","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZHvIegQiko"}],"urlSource":"https://foundations.projectpythia.org/core/pandas/pandas","key":"mdG2Re0w1S"}],"key":"lF8ZrBX5ev"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kM8N48VHO2"}],"key":"OtB0sJ90vZ"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Used to read in and organize data (in particular dataframes)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"cQl5oHz4m7"}],"key":"BHlG47mQCM"}],"key":"SHBzEq3ikD"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/numpy/numpy-basics","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Intro to Numpy","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"lsbVDdaZBD"}],"urlSource":"https://foundations.projectpythia.org/core/numpy/numpy-basics","key":"tYUMQSKw17"}],"key":"FSZ15Kw3bJ"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Oi9kwfa6O2"}],"key":"ND9E7zmovz"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Used to work with large arrays","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"HELXhmpLFo"}],"key":"pHE5LExyLZ"}],"key":"E5uPDrwNkx"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"https://docs.scipy.org/doc/scipy-1.13.1/tutorial/fft.html","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Intro to SciPy","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Zmc05X7JC9"}],"urlSource":"https://docs.scipy.org/doc/scipy-1.13.1/tutorial/fft.html","key":"wfAZohOzYI"}],"key":"GeNRaCZOvY"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"DVI2uy3QYf"}],"key":"bQl2Y07xqh"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Used to work with .wav files and built-in Fast Fourier Transform","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"T7pOrveJie"}],"key":"mMK3HmoRsP"}],"key":"rEUmie0W6P"}],"key":"vQm1n4DNgo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"y31X0bk96q"}],"key":"QhWml3b1gr"},{"type":"text","value":": 30 minutes","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"LIUjMyE53p"}],"key":"w42HPd04hw"}],"key":"s9GMSuAr8m"}],"key":"gKALlWPcD3"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AJLAh4tMCG"}],"key":"aJk8ub4SIu"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MEPruqgEwH"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"APgLEfz6iU"}],"key":"x0A3ZrEUNH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import numpy as np                          # working with arrays\nimport pandas as pd                         # working with dataframes\nfrom scipy.io import wavfile                # loading in wav files\nimport matplotlib.pyplot as plt             # plot data\nfrom scipy.fftpack import fft, fftfreq      # working with Fourier Transforms\n\nimport pywt                                 # PyWavelets","key":"m2sNbBbc0V"},{"type":"output","id":"hAUFjfUxqUzd93_tZynJ5","data":[{"output_type":"stream","name":"stderr","text":"Matplotlib is building the font cache; this may take a moment.\n"}],"key":"U3bP3vX4zr"}],"key":"BGBkZPa5tM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Extract audio .wav file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FJbpCajV6w"}],"identifier":"extract-audio-wav-file","label":"Extract audio .wav file","html_id":"extract-audio-wav-file","implicit":true,"key":"iF3Fg6MVl6"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"As when working with the “Jingle Bells” song file, any .wav input file contains information about the amplitude at every point in the file. The frequency of the note will determine which chord each part of the piece represents.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"JtlatjP1Mv"}],"key":"mqvh4MjhMf"}],"key":"rTleZSZX9x"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"sampleRate, signalData = wavfile.read('../data/mystery_signal.wav')\n\nduration = len(signalData) / sampleRate\ntime = np.arange(0, duration, 1/sampleRate) \n\nprint(f\"Sample Rate: {sampleRate}\")\nprint(f\"duration = {duration} seconds\")\nprint(f\"Total length in time steps = {len(time)}\")","key":"uUPMPheiqn"},{"type":"output","id":"ftGdRLJGqVuKBezM2OgI7","data":[{"output_type":"stream","name":"stdout","text":"Sample Rate: 10000\nduration = 6.0 seconds\nTotal length in time steps = 60000\n"}],"key":"OjtUJzVt93"}],"key":"cDmMCejiq2"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s Give the Data a Look!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LzGLOX2RSP"}],"identifier":"lets-give-the-data-a-look","label":"Let’s Give the Data a Look!","html_id":"lets-give-the-data-a-look","implicit":true,"key":"mUk4vLShab"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"It is always good practice to view the data that we have collected. First, let’s organize the data into a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FhvvvI4fAB"},{"type":"inlineCode","value":"pandas","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VuDXekTLuY"},{"type":"text","value":" dataframe to organize the amplitude and time stamps.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Gu3ai1d8pR"}],"key":"HIqqcGuXKr"}],"key":"IEUtkX1zv4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"signal_df = pd.DataFrame({'time (seconds)': time, 'amplitude': signalData})\nsignal_df.head()","key":"HUPH7JGKse"},{"type":"output","id":"bprpzBhThO42y4Wi7sn_t","data":[{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/plain":{"content":"   time (seconds)  amplitude\n0          0.0000      11182\n1          0.0001      29148\n2          0.0002       2847\n3          0.0003      14564\n4          0.0004      21618","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>time (seconds)</th>\n      <th>amplitude</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0.0000</td>\n      <td>11182</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>0.0001</td>\n      <td>29148</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>0.0002</td>\n      <td>2847</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>0.0003</td>\n      <td>14564</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>0.0004</td>\n      <td>21618</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"key":"C2iQKqQ6L8"}],"key":"RAS0F23y5n"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot a Small Sample of the .wav File","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GVEXfR5aqP"}],"identifier":"plot-a-small-sample-of-the-wav-file","label":"Plot a Small Sample of the .wav File","html_id":"plot-a-small-sample-of-the-wav-file","implicit":true,"key":"T4tL7plsOV"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Plot a small subsample of the .wav to visualize the input data.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rKIOhxAU0O"}],"key":"gX4wLMJ5t6"}],"key":"qCj9fvPCKI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(8, 8))\nfig = plt.plot(signal_df[\"time (seconds)\"], signal_df[\"amplitude\"])\nplt.title(\"Subsample of Mystery Audio File\")\nax.set_xlim(signal_df[\"time (seconds)\"][2000], signal_df[\"time (seconds)\"][4000])\nplt.xlabel(\"Time (seconds)\")\nplt.ylabel(\"Amplitude\")\nplt.show()","key":"Ow6Yu2kYsi"},{"type":"output","id":"_tytvvgrhhy_DGbeZz6A_","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 800x800 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"9073c2f3595009ebaea4eb2d365dcdc5","path":"/wavelet-cookbook/build/9073c2f3595009ebaea4eb2d365dcdc5.png"}}}],"key":"qp2Ydtx7vN"}],"key":"W7B85FY4cY"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Wavelet Analysis: Power Spectrum","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hYaa3KGCnf"}],"identifier":"wavelet-analysis-power-spectrum","label":"Wavelet Analysis: Power Spectrum","html_id":"wavelet-analysis-power-spectrum","implicit":true,"key":"Z1cTV1j23D"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The power spectrum plots the real component of the complex number returns from wavelet coefficients. This will return information about the frequency and time that we need to use to determine which notes are used in what order for the keypad.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Yxmorcw6TA"}],"key":"DzMZGlNuAs"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"For the purpose of this example, we will use the Morlet mother wavelet. Morlet is one type of mother wavelet useful for working with audio signals and is a good general wavelet to start with when analyzing frequencies of a signal.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PuseQ6aHqp"}],"key":"dhbeA1Pkul"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"However, choosing which wavelet to use is an important step as different wavelets will be sensitive to different features in time-series data.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JFvFpeceGu"}],"key":"hnBCOnMDIN"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"link","url":"https://www.mathworks.com/help/wavelet/gs/choose-a-wavelet.html","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"To learn more!","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"JiUrhz10tl"}],"urlSource":"https://www.mathworks.com/help/wavelet/gs/choose-a-wavelet.html","key":"XLrvDhZwRb"}],"key":"ZEnKJZv6IH"}],"key":"RESs5G86Jr"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"wavelet_mother = \"morl\" # morlet mother wavelet\n\n# scale determines how squished or stretched a wavelet is\nscales = np.arange(1, 40)\nwavelet_coeffs, freqs = pywt.cwt(signalData, scales, wavelet = wavelet_mother)\n\n# Shape of wavelet transform\nprint(f\"size {wavelet_coeffs.shape} with {wavelet_coeffs.shape[0]} scales and {wavelet_coeffs.shape[1]} time steps\")\nprint(f\"x-axis is: {wavelet_coeffs.shape[1]}\")\nprint(f\"y-axis is: {wavelet_coeffs.shape[0]}\")","key":"ObqwyAafDC"},{"type":"output","id":"O56SdnQAs2pfbdq6evGxW","data":[{"output_type":"stream","name":"stdout","text":"size (39, 60000) with 39 scales and 60000 time steps\nx-axis is: 60000\ny-axis is: 39\n"}],"key":"J37VE0SBn3"}],"key":"h99XCMOFLb"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot Scalogram","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"I00PVcjL4W"}],"identifier":"plot-scalogram","label":"Plot Scalogram","html_id":"plot-scalogram","implicit":true,"key":"kinqlAav6G"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We will be plotting the wavelet as a scalogram, where the presence of a strong match to a specific frequency will be a darker color. This will create distinct bands of a dark color where a specific frequency is present.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CAmzTlD9i7"}],"key":"MajNJfa5wK"}],"key":"miF2Gj4CWS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(8, 8))\ndata = np.log2(np.square(abs(wavelet_coeffs))) # compare the magntiude\nplt.xlabel(\"Time Steps\")\nplt.ylabel(\"Scale Sensitivity\")\nplt.imshow(data, \n           vmax=(data).max(), vmin=(data).min(),\n           cmap=\"coolwarm\", aspect=\"auto\")\nplt.colorbar()\nplt.show()","key":"uk9GpqCokr"},{"type":"output","id":"tBLnYJX6LlF7Pvx9sEMrh","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 800x800 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"02267edc2ea1aec8e1a2daa7b40ab476","path":"/wavelet-cookbook/build/02267edc2ea1aec8e1a2daa7b40ab476.png"}}}],"key":"Cpmb8sX47f"}],"key":"kPRK3t7Vh8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Behold! Distinct Bands of Frequencies!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cRnWblQ9sH"}],"identifier":"behold-distinct-bands-of-frequencies","label":"Behold! Distinct Bands of Frequencies!","html_id":"behold-distinct-bands-of-frequencies","implicit":true,"key":"bjaMPh3B7F"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Each distinct band represents a note. So, we can see that the data at the beginning and at the end is random noise, with no distinct frequency. But at 1 second, a distinct note that lasts for 1 second, followed by three additional distinct bands. We now know the code is four numbers long. But now we need to determine what the numbers are and what their order is. Let’s see where the possible note frequencies we have by overlaying the frequencies of each note onto the wavelet scalogram.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"RBWrpslqjc"}],"key":"NXyUf09DQM"},{"type":"div","class":"admonition alert alert-info","children":[{"type":"paragraph","children":[{"type":"text","value":"Important Note","key":"ie26q9OtVd"}],"key":"KAS8t2KNU4"},{"type":"text","value":"To convert Hz frequency to a ","key":"c8CmEQrN9n"},{"type":"inlineCode","value":"scale = hz *.0001","key":"DDksriHd5s"},{"type":"text","value":" (where 0.01 is 100 Hz sampling) then apply ","key":"njZtKRdVfx"},{"type":"inlineCode","value":"frequency2scale","key":"LSHyndkvaa"},{"type":"text","value":" PyWavelets function","key":"Yyy1ZWLmX5"}],"key":"yU25Qf1dcM"}],"key":"MNdSXCnhDn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(8, 8))\n\n# Overlay frequency of notes as dotted lines\nsample_rate = 1/sampleRate\na_freq = pywt.frequency2scale(wavelet_mother, 440*sample_rate)\nplt.axhline(y=a_freq, color='lightpink', linestyle='--', label='A') # A note: 440 hz\nb_freq = pywt.frequency2scale(wavelet_mother, 494*sample_rate)\nplt.axhline(y=b_freq, color=\"blue\", linestyle='--', label='B')      # B Note: 494 hz\nc_freq = pywt.frequency2scale(wavelet_mother, 261*sample_rate)\nplt.axhline(y=c_freq, color='lightblue', linestyle='--', label='C') # C Note: 261 hz\nd_freq = pywt.frequency2scale(wavelet_mother, 293*sample_rate)\nplt.axhline(y=d_freq, color='green', linestyle='--', label='D')     # D Note: 293 hz\ne_freq = pywt.frequency2scale(wavelet_mother, 330*sample_rate)\nplt.axhline(y=e_freq, color='orange', linestyle='--', label='E')    # E Note: 330 hz\nf_freq = pywt.frequency2scale(wavelet_mother, 350*sample_rate)\nplt.axhline(y=f_freq, color='grey', linestyle='--', label='F')      # F Note: 350 hz\ng_freq = pywt.frequency2scale(wavelet_mother, 392*sample_rate)\nplt.axhline(y=g_freq, color='purple', linestyle='--', label='G')    # G Note: 392 hz\n\n# Plot Power scalogram\npower = np.log2(np.square(abs(wavelet_coeffs))) # compare the magntiude\nplt.title(\"Note Frequency as Scale\")\nplt.xlabel(\"Time Steps\")\nplt.ylabel(\"Scale Sensitivity\")\nplt.imshow(power, \n           vmax=(power).max(), vmin=(power).min(),\n           cmap=\"coolwarm\", aspect=\"auto\")\nplt.legend()\nplt.show()","key":"KX8CtTSAEd"},{"type":"output","id":"9oizn-GO776lNHGkFtta_","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 800x800 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"e029e3ffe0997a24324799b1609dde14","path":"/wavelet-cookbook/build/e029e3ffe0997a24324799b1609dde14.png"}}}],"key":"J8zTT7GxXv"}],"key":"p7QCLmffrD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"But Which Match Best?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WHPIHDvltd"}],"identifier":"but-which-match-best","label":"But Which Match Best?","html_id":"but-which-match-best","implicit":true,"key":"jJfWPXBVUz"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We are looking for a note frequency that best lines up with the darkest part of each band. The first and the last band seem like the same note, but is it closer to an A note or a B note?","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Dql6Y2vAjq"}],"key":"qCnYrdnHFn"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Let’s see if we can use Fourier Transform to get a smaller range of notes to chose from.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"giBGd3SHAa"}],"key":"UXptyQVcCc"}],"key":"oNdv8X3EF0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Fast Fourier Transform","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JcxEq4qtPu"}],"identifier":"fast-fourier-transform","label":"Fast Fourier Transform","html_id":"fast-fourier-transform","implicit":true,"key":"EDq9oSM9DI"}],"key":"DlNoNSmrBH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fourier_transform = abs(fft(signalData))\nfreqs = fftfreq(len(fourier_transform), sample_rate)","key":"aHUOzXNJoa"},{"type":"output","id":"2xL6VuOHmIyTKA3eQQSr_","data":[],"key":"ONN2iubDcU"}],"key":"yDLQr8aR1V"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(8, 8))\nplt.plot(freqs, fourier_transform)\nax.set_xlim(left=200, right=500) \nplt.axvline(x=440, color=\"lightpink\", label=\"A\",alpha=0.5) # A note: 440 hz\nplt.axvline(x=494, color=\"blue\", label=\"B\",alpha=0.5)      # B Note: 494 hz\nplt.axvline(x=261, color=\"lightblue\", label=\"C\",alpha=0.5) # C Note: 261 hz\nplt.axvline(x=293, color=\"green\", label=\"D\",alpha=0.5)     # D Note: 293 hz\nplt.axvline(x=330, color=\"orange\", label=\"E\",alpha=0.5)    # E Note: 330 hz\nplt.axvline(x=350, color=\"grey\", label=\"F\",alpha=0.5)      # F Note: 350 hz\nplt.axvline(x=392, color=\"purple\", label=\"G\",alpha=0.5)    # G Note: 392 hz\nplt.title(\"Signal Frequency Prevalence (FFT)\")\nplt.xlabel('Frequency (Hz)')\nplt.ylabel('Amplitude')\nplt.legend()\nplt.show()","key":"kFQOEUyZgL"},{"type":"output","id":"Pcz4Sdolt_FUnAMK-iHm0","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 800x800 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"bf67605d45ee8e4ee9e037f5203fcfcf","path":"/wavelet-cookbook/build/bf67605d45ee8e4ee9e037f5203fcfcf.png"}}}],"key":"ZnygCzD01H"}],"key":"ZjISDe4JF8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Perfect, There are Three Notes!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qbC1qUWnYu"}],"identifier":"perfect-there-are-three-notes","label":"Perfect, There are Three Notes!","html_id":"perfect-there-are-three-notes","implicit":true,"key":"GNPY6u3Fm6"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Three notes stand out, and one note is used about twice as much as the other two: A, B, F.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pujAqs6unU"}],"key":"B90q3legOz"}],"key":"n5Rl8cwn40"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(8, 8))\n\n# Overlay frequency of notes as dotted lines\nsample_rate = 1/sampleRate\na_freq = pywt.frequency2scale(wavelet_mother, 440*sample_rate)\nplt.axhline(y=a_freq, color='cyan', linestyle='--', label='A')\nb_freq = pywt.frequency2scale(wavelet_mother, 494*sample_rate)\nplt.axhline(y=b_freq, color=\"green\", linestyle='--', label='B')\nf_freq = pywt.frequency2scale(wavelet_mother, 350*sample_rate)\nplt.axhline(y=f_freq, color='grey', linestyle='--', label='F')\n\n# Plot Power scalogram\npower = np.log2(np.square(abs(wavelet_coeffs))) # compare the magnitude\nplt.title(\"Note Frequency as Scale\")\nplt.xlabel(\"Time Steps\")\nplt.ylabel(\"Scale Sensitivity\")\nplt.imshow(power, \n           vmax=(power).max(), vmin=(power).min(),\n           cmap=\"coolwarm\", aspect=\"auto\")\nplt.legend()\nplt.show()","key":"L55tUOMyN8"},{"type":"output","id":"LnODvBDBBxLnCySjPlMJe","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 800x800 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"de4884190e5317c94cac32d6efeff65e","path":"/wavelet-cookbook/build/de4884190e5317c94cac32d6efeff65e.png"}}}],"key":"t1QmrNxKt8"}],"key":"EHBc064Ffq"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Three Notes Played Over Six Seconds","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q5OdqtWOo7"}],"identifier":"three-notes-played-over-six-seconds","label":"Three Notes Played Over Six Seconds","html_id":"three-notes-played-over-six-seconds","implicit":true,"key":"JvF19BQfSP"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We have the keypad solution! The three notes are played (sometimes repeated) over the course of the six seconds.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZSbDE3CwCH"}],"key":"kTcBleNpuI"},{"type":"heading","depth":3,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"A, B, F, A","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"aU0JvvFQ3N"}],"identifier":"a-b-f-a","label":"A, B, F, A","html_id":"a-b-f-a","implicit":true,"key":"X9Qfxlg6lw"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"From our original problem, we know that the door code is set up as:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"YKFPCoPt5u"}],"key":"NnmwjQoR6W"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"A note: 0","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"QvnGFcNsIz"}],"key":"alcjoHKRM6"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"B note: 1","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"q51aZGmjpX"}],"key":"pMtLZ3ZSS1"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"C note: 2","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"td1fQ4APe7"}],"key":"QywF304pMA"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"D note: 3","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"weupite1qS"}],"key":"eB5thAJL5Q"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"E note: 4","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"nVDtt2q5W8"}],"key":"dBB8DIY5Ln"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"F note: 5","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"KwiTj2TRnO"}],"key":"OMYRQQ0F41"}],"key":"hvRcWfZu9W"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"The solution to the door password is:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"HE4ErAnWof"}],"key":"kxpwruHfHB"},{"type":"heading","depth":3,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"0, 1, 5, 0","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"PETaJf3y2G"}],"identifier":"id-0-1-5-0","label":"0, 1, 5, 0","html_id":"id-0-1-5-0","implicit":true,"key":"dlHkKC3EdZ"}],"key":"XP8HQHwEMV"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JOtwLyQIJR"}],"key":"F0VnQLSgCf"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e3BMNbaQDa"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"LmS1zA2QXz"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now we’ve had a chance to work with unknown input values, but within an expected range. Different time-series data will have different ranges of expected frequencies, and with Fourier Transform and wavelet analysis it is possible to pull out such relevant data.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"MJq7jvB4rZ"}],"key":"r7C5QFVuqw"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What’s next?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"V6OotzW8W0"}],"identifier":"whats-next","label":"What’s next?","html_id":"whats-next","implicit":true,"key":"KLZQKNhChK"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Up next: apply wavelets transform and work with weather data!","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"oi069FQqmY"}],"key":"msaXQmuyMU"}],"key":"OFW9DtEVFo"}],"key":"EFo4Q6I5Ku"}],"key":"eWAvAzQkwq"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"PyWavelets and Jingle Bells","url":"/notebooks/wavelet-introduction/jingle-bells","group":"Introduction"},"next":{"title":"Atmospheric Data: Nino 3 SST Index","url":"/notebooks/example-workflows/nino3","group":"Geoscience Workflows"}}},"domain":"http://localhost:3000"}